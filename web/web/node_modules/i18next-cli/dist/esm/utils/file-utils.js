import{access as t,readFile as r}from"node:fs/promises";import{resolve as e,extname as n}from"node:path";import{createJiti as s}from"jiti";import{getTsConfigAliases as o}from"../config.js";function a(t,r,e=""){return t.replace("{{language}}",r).replace("{{lng}}",r).replace("{{namespace}}",e).replace("{{ns}}",e)}async function c(a){const c=e(process.cwd(),a);try{await t(c)}catch{return null}try{const t=n(c).toLowerCase();if(".json"===t){const t=await r(c,"utf-8");return JSON.parse(t)}if(".ts"===t||".js"===t){const t=await o(),r=s(process.cwd(),{alias:t,interopDefault:!0});return await r.import(c,{default:!0})}return null}catch(t){return console.warn(`Could not parse translation file ${a}:`,t),null}}function u(t,r="json",e=2){const n=JSON.stringify(t,null,e);switch(r){case"js":case"js-esm":return`export default ${n};\n`;case"js-cjs":return`module.exports = ${n};\n`;case"ts":return`export default ${n} as const;\n`;default:return`${n}\n`}}export{a as getOutputPath,c as loadTranslationFile,u as serializeTranslationFile};
